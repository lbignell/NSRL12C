14/11/9
- Copied contents from NSRL13C.
- The intent of this simulation is to replicate the experiment carried out in
  2012 with the reflective and unreflective tubs.

Things to change:

Geometry: Hodoscopes, detectors, detector wall properties of reflective tub.
  	  I can use technical drawings but I may still need to rely on David.
Physics: Should not change.
Sensitive Detectors: I'll need to make 2 LS volumes sensitive, and assign the
	  	     PMTup and PMT down SDs to the new PMTs.
Run Action: Probably needs changing to reflect new SDs, etc.
Primary Generator: Need to reproduce the beam, and have a user-settable variable
		   that modifies the height of the beam entry point.

- Created PGAMessenger class to handle adjusting the height of the mean beam
  position. Tested working.
- I'm on the plane at the moment, so I'll need to wait until I have internet to
  get the technical drawings and can implement the geometry changes.

14-12-4
- There are some notes pasted on the back of notebook, page 29. These spell out
  the distances between the hodoscopes/tubs. The notes also indicate that the
  beam hit the centre of the tubs.
- I should git this code to both keep track of changes and make it accessible 
  between my various machines...

14-12-5
- Status to date:
  - Completed the geometry section of DetectorConstruction.
  - Put code into a Git repository and pushed to GitHub.

- Testing teflon tub optical properties. The optical photons need to traverse
  the white teflon if Cerenkov light is to be produced in it. So the way that I
  set up the optical interface must change.
  --> In my previous code I just had a uniform reflectance from the box that was
      implemented in SensitiveDetector.
  --> I can still do this for the black teflon box.
  --> However for the white one I must use the Geant4 optical surface models.
      What seems to work is having a ground dielectric-dielectric interface on
      the liquid/teflon barrier, and a ground dielectric-metal interface on the
      teflon/air barrier. I can then adjust the reflectance by modifying the
      attenuation length in the PFTE.
      --> I've implemented this.

14-12-9
- To do:
  - Modify my RunAction to collect the following info:*DONE*
    - Incident primary kinetic energy for T1/T2.
    - Edep in T1/T2/H1/H2/H3.
    - Vertex X-Y of primary (implement in T1).
    - Whether the primary particle entered T1/T2/H1/H2/H3.
    - Total # opt photons in T1/T2.
    - Opt photon energy on production; T1/T2.
    - Opt photon creator process; T1/T2.
    - Opt photon energy at PMT (+ measured); winT1/winT2.
    - Num Opt photons at PMT (+ measured); winT1/winT2.
  - Propagate these changes through the program. *DONE*
  - Recalculate the photon position on the PC surface for the PMTwin class. I
    should also enable setting the T1 and T2 PMT effective areas as different
    values.*DONE*
  - Modify the PGA to reflect the beam profile used in NSRL12C.
    -> I can't find any relevant docs. I'll ask David when he's back from 
       holidays. I'll proceed for now assuming the parameters are the same as
       for NSRL13A.
  - Add Rayleigh scattering length to teflon.*DONE*

- Making the Rayleigh scattering length too short causes excessively long
  compute times. I can improve this situation by:
  - Modify the Rayleigh scattering length to a longer value to make things
    easier.
  - Make the attenuation length a bit shorter (if it actually is short).
  - Once I've got the optical properties sorted; remove the G4OpticalSurface
    on tub 1.
  - I can maybe gain a few-fold speedup by killing some fraction of the optical
    photons and increasing the PMT QE by a corresponding fraction.
  - Figure out how to run multithreaded. Running on the RACF may then work.

2014-12-10
- Kinetic energy sometimes (~% level) appears to be higher than the incident 
  particle energy! It is very obviously multiple particles being counted at
  once. I should check my initialization for this. The other quantities don't
  appear to exhibit the same error (thankfully). -> Mostly fixed, a full fix
  would require more effort than I can justify. Results should be correct for
  >99% of events and no other quantities are affected.
- NumPhotons_PMTT2 appears to have a type error. I will be getting this when I
  call it from SensitiveDetector, so I should check that call and the method
  that is called.
  -> Should be fixed now. Is not in fact. I need to look into this further...

- Implementing more realistic teflon optical properties; based on this thesis:
  https://smartech.gatech.edu/bitstream/handle/1853/22686/li_qinghe_200805_mast.pdf
  -> Simulation runs even slower: 1 evt = 2:39.522, 2 evts = 5:38.081.
  -> A single event takes > 1 minute!

- To speed things up; I'm going to implement a simpler optical model.
  -> I'll use the measured attenuation coefficient of ~1m, and NO scatter.
  -> I'll use the nominal teflon refractive index of 1.36.
  -> I'll not model Rayleigh scatter.
  -> I'll use the G4 optical surface type as a ground (diffusive scatter) metal
     (perfect scatter) between the teflon and the air interface.
- The above measures will allow Ckov production in the teflon and semi-realistic
  scattering of light from teflon. It will allow the Ckov produced in the teflon
  to directly illuminate the PMT, but this can happen in the water anyway.
  -> New run time: 2 evts = 13.727, 1 evt = 9.393 -> 4 secs/evt

- Results:
  - TUB 1
  -> The 475 MeV data agree surprisingly well with the measured results for a
     first pass (~10.5 PE measured (RMS 5.7) vs 13.3 PE simulated (RMS 6.2)).
  -> The 2 GeV results are further off: 204 PE (RMS 23.7) measured, 346 PE (RMS
     32.9) simulated. At least the simulated results exhibit greater light yield
     than the measured results at both energies in T1.
  - TUB 2
  -> 475 MeV data are both consistent with ~ single PE.
  -> 2GeV: 3.5 PE (5.1 RMS) measured, 2.2 PE (3.3 RMS) simulated. Not much to go
     on but it appears that the black teflon may need some reflectance...

- To make the code more portable; I've made a requirement that the location of
  the data files be set using the $DATAFILES environment variable.
